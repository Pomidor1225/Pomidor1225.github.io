<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Telegram Mini App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <style>
        * {
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            margin: 0;
            background: black;
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

            body::before {
                content: "";
                position: fixed;
                inset: 0;
                z-index: -1;
                pointer-events: none;
                opacity: 0.75;

                background-image:
                    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'%3E%3Cg fill='none' stroke='%23ffffff' stroke-width='2' stroke-linejoin='round'%3E%3Cpath d='M40 4 L46 34 L76 40 L46 46 L40 76 L34 46 L4 40 L34 34 Z'/%3E%3C/g%3E%3C/svg%3E"),
                    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='55' height='55' viewBox='0 0 80 80'%3E%3Cg fill='none' stroke='%23ffffff' stroke-width='2' stroke-linejoin='round'%3E%3Cpath d='M40 6 L45 34 L74 40 L45 46 L40 74 L35 46 L6 40 L35 34 Z'/%3E%3C/g%3E%3C/svg%3E"),
                    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='35' height='35' viewBox='0 0 80 80'%3E%3Cg fill='none' stroke='%23ffffff' stroke-width='2' stroke-linejoin='round'%3E%3Cpath d='M40 10 L44 34 L70 40 L44 46 L40 70 L36 46 L10 40 L36 34 Z'/%3E%3C/g%3E%3C/svg%3E");

                background-repeat: no-repeat, no-repeat, no-repeat;

                /* расположение как на твоём фото (по краям экрана) */
                background-position:
                    6% 18%,
                    94% 34%,
                    8% 78%;

                /* размеры звёзд */
                background-size:
                    70px 70px,
                    48px 48px,
                    30px 30px;

                filter: drop-shadow(0 0 6px rgba(255,255,255,0.35));
             }     

        .container {
            padding: 16px;
            max-width: 390px;
            margin: 0 auto;
        }

        .card {
            background: #2b2b2b;
            border-radius: 22px;
            padding: 14px;
            margin-bottom: 24px;
            cursor: pointer;
            text-align: center;
        }

        .image-box {
            width: 100%;
            aspect-ratio: 1 / 1;
            overflow: hidden;
            border-radius: 16px;
        }

        .image-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .title {
            margin-top: 14px;
            font-size: 20px;
            font-weight: bold;
        }

        .product {
            display: none;
            padding: 16px;
            max-width: 390px;
            margin: 0 auto;
            min-height: 100vh;
        }

        .gallery {
            width: 100%;
            height: calc(100vw - 32px);  /* квадрат на телефоне */
            max-height: 390px;           /* ограничение для ПК */
            display: flex;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            gap: 16px;
        }   

        .gallery::-webkit-scrollbar {
            display: none;
        }

        .gallery img {
            flex: 0 0 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 18px;
            scroll-snap-align: center;
        }

        .dots {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin: 12px 0 20px;
        }

        .dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #666;
        }

        .dot.active {
            background: white;
        }

        .info-box {
            background: #2b2b2b;
            border-radius: 18px;
            padding: 14px;
            margin-bottom: 12px;
        }

        .info-title {
            font-size: 18px;
            font-weight: bold;
        }

        .info-desc {
            font-size: 14px;
            opacity: 0.8;
            margin-top: 6px;
        }

        button {
            margin-top: 20px;
            padding: 12px;
            width: auto;
            border-radius: 14px;
            border: none;
            font-size: 16px;
            cursor: pointer;
        }
        
        .title-row{
  display:flex;
  gap:12px;
  align-items:center;
  width:100%;
}

.title-row .title{
  height:54px;
  display:flex;
  align-items:center;
  flex:1;
  margin:0;
}

.buy-btn{
  height:54px;
  margin:0;
  padding:0 22px;
  border:none;
  border-radius:18px;
  background:#3a3a3a;
  color:#fff;
  font-weight:800;
  font-size:18px;
  cursor:pointer;
  white-space:nowrap;

  width:auto;
  margin-top:0;
  flex:0 0 auto;
}

.buy-btn:active{
  transform:scale(0.98);
}
    
    </style>
</head>

<body>

<div class="container" id="main">

  <div class="card" onclick="openProduct('hurts')">
    <div class="image-box">
      <img src="hurts_1.jpg">
    </div>
    <div class="title">HURTS</div>
  </div>

  <div class="card" onclick="openProduct('tennis')">
    <div class="image-box">
      <img src="tennis_1.jpg">
    </div>
    <div class="title">TENNIS</div>
  </div>

</div>

<div class="product" id="product"><div class="gallery" id="gallery"></div>
    <div class="dots" id="dots"></div>

    <div class="title-row">
  <div class="info-box" style="flex:1; margin:0;">
    <div class="info-title" id="productTitle"></div>
  </div>

  <button class="buy-btn" onclick="buyNow(event)">
    Купить
  </button>
</div>

    <div class="info-box">
        <div class="info-desc">Описание товара</div>
    </div>
</div>

<script>
    const products = {
        hurts: {
            title: "HURTS",
            images: [
                "hurts_1.jpg",
                "hurts_2.jpg",
                "hurts_3.jpg",
                "hurts_4.jpg",
                "hurts_5.jpg"
            ]
        },
        tennis: {
            title: "TENNIS",
            images: [
                "tennis_1.jpg",
                "tennis_2.jpg",
                "tennis_3.jpg"
            ]
        }
    };

   const tg = window.Telegram?.WebApp;

   if (tg) {
     tg.ready();
     tg.expand();
   }

function openProduct(key) {
    document.getElementById("main").style.display = "none";
    document.getElementById("product").style.display = "block";

    const gallery = document.getElementById("gallery");
    const dots = document.getElementById("dots");

    gallery.innerHTML = "";
    dots.innerHTML = "";
    gallery.scrollLeft = 0;

    products[key].images.forEach((src, i) => {
        const img = document.createElement("img");
        img.src = src;
        gallery.appendChild(img);

        const dot = document.createElement("div");
        dot.className = "dot" + (i === 0 ? " active" : "");
        dots.appendChild(dot);
    });

    document.getElementById("productTitle").innerText = products[key].title;

    gallery.onscroll = () => {
        const index = Math.floor(
            (gallery.scrollLeft + gallery.clientWidth / 2) / gallery.clientWidth
        );

        [...dots.children].forEach((d, i) => {
            d.classList.toggle("active", i === index);
        });
    };

    // ✅ показываем кнопку "Назад" сверху в Telegram
    if (tg) {
        tg.BackButton.show();
        tg.BackButton.offClick(goBack);
        tg.BackButton.onClick(goBack);
    }
}

function goBack() {
    document.getElementById("product").style.display = "none";
    document.getElementById("main").style.display = "block";

    // ✅ убираем кнопку "Назад"
    if (tg) {
        tg.BackButton.hide();
        tg.BackButton.offClick(goBack);
    }
}

    function buyNow(e){
        if (e) e.stopPropagation();
        
  const url = "https://t.me/Manager_Glitch";

  if (tg) {
    tg.openTelegramLink(url);
  } else {
    window.location.href = url;
  }
}
    
</script>

</body>

</html>












